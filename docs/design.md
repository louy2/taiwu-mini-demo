# 设计文档

## 核心概念

### 属性
1.  **力道 (Power)** / **卸力 (Parry)**: 决定命中率。
2.  **破体 (Penetration)** / **御体 (Resistance)**: 决定伤害倍率。
3.  **身心强健 (Health)**: 固定为 200。伤害承受池上限。

### 战斗机制

#### 1. 命中判定
根据双方力道与卸力的对比，命中率分为两个区间：
*   **当 进攻方力道 > 防守方卸力 时**：
    $$ 命中率 = \frac{进攻方力道}{防守方卸力} $$
    (通常大于 100%，即必中且可能有暴击或其他溢出效果，目前仅作必中处理)

*   **当 进攻方力道 \le 防守方卸力 时**：
    $$ 命中率 = \frac{\frac{进攻方力道}{防守方卸力}}{2} $$
    (最大为 50%)

#### 2. 伤害计算
攻击命中后，计算实际伤害。
*   **基础伤害 (Base Damage)**: 固定为 9。
*   **穿透强度 (Ratio)**: $$ x = \frac{进攻方破体}{防守方御体} $$
*   **衰减系数 (Decay Factor)**: $$ y = \frac{12.51}{12.51 + x} $$
    *(拟合自给定数据表，MSE < 1e-7)*
*   **最终伤害**:
    $$ 伤害 = 基础伤害 \times x \times y $$
    代入 y 可得：
    $$ 伤害 = 9 \times \frac{12.51 \times x}{12.51 + x} $$

#### 3. 受伤标记 (Injury Marks)
*   伤害不再直接转化为标记，而是累积在“伤害池”中。
*   每当 **累积伤害 \ge 身心强健 (200)** 时：
    1.  受击方增加 1 个 **受伤标记**。
    2.  累积伤害减去 200 (溢出部分保留在池中)。
*   **失败条件**: 累计获得 12 个受伤标记。

### 成长
*   点击“成长”会随机增加 力道/卸力 和 破体/御体。
